!function(){"use strict";!function(){const e=function(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o="";for(let e=0;e<16;e++)o+=t.charAt(Math.floor(Math.random()*t.length));return o}(),t=window.location.hash,o=t.slice(t.indexOf("=")+1,t.indexOf("&"));function r(e,t,o){let r="https://api.spotify.com/v1/me/top";return r+="/"+e,r+="?limit="+t,r+="&time_range="+o,r}const n={topArtist(e,t){const o=JSON.parse(sessionStorage.total_data);let r=[];for(let n=0;n<t;n++)r.push([o[e][n].name,o[e][n].images[0].url]);return r},topTracks(e,t){const o=JSON.parse(sessionStorage.total_data);let r=[];for(let n=0;n<t;n++)r.push([o[e][n].name,o[e][n].artists[0].name,o[e][n].album.images[0].url]);return r},topGenres(e,t){const o=JSON.parse(sessionStorage.total_data),r={};for(let t=0;t<50;t++){let n=o[e][t].genres;for(let e of n)r[e]||(r[e]=0),r[e]+=1}const n=Object.entries(r).sort(((e,t)=>t[1]-e[1])),s=[];for(let e=0;e<t;e++)s.push(n[e]);return s},mostObscure(e){const t=JSON.parse(sessionStorage.total_data);let o=0,r=null,n=null;for(let s=0;s<50;s++)t[e][s].popularity>o&&(o=t[e][s].popularity,r=t[e][s].name,n=t[e][s].images[0].url);return[r,n,o]},randomColor(){return["#f037a5","#cdf564"][Math.floor(2*Math.random())]}};class s{constructor(e,t){this.createSlideTrack(e),this.createSlideArtist(t),this.createSlideGenre(t),this.createSlideObscure(t)}createSlideArtist(e){const t=n.topArtist(e,5);document.querySelector("#topArtists_h2").innerHTML="Funny sentence";let o=document.querySelector("#artist_grid");for(let e=0;e<9;e++){let e=document.createElement("img");e.src=t[0][1],o.append(e)}let r=document.querySelector("#topArtists_ul");for(let e of t){let t=document.createElement("li");t.innerHTML=`${e[0]}`,r.append(t)}}createSlideTrack(e){const t=n.topTracks(e,5);document.querySelector("#topTracks_h2").innerHTML="Top Tracks for $ { }";let o=document.querySelector("#topTracks_figure");for(let e of t){let t=document.createElement("div"),r=document.createElement("p"),n=document.createElement("img");n.src=e[2],r.innerHTML=e[0],t.append(n),t.append(r),o.append(t)}}createSlideGenre(e){const t=n.topGenres(e,5);document.querySelector("#topGenres_h2").innerHTML="Top Genres for $ { }";let o=document.querySelector("#topGenres_ul");for(let e=0;e<5;e++){let r=document.createElement("li");r.innerHTML=t[e][0],o.append(r)}}createSlideObscure(e){const t=n.mostObscure(e);document.querySelector("#mostObscure_h2").innerHTML="Most Obscure Artist",document.querySelector("#mostObscure_h3").innerHTML=t[0];let o=document.createElement("img");o.src=t[1];let r=document.querySelector("#obscure_imgs");for(let e=0;e<3;e++)r.append(o)}}document.addEventListener("DOMContentLoaded",(()=>{if(window.location.hash.includes("access_token"))null===sessionStorage.getItem("total_data")&&async function(){const e={};let t=["short_term","medium_term","long_term"];for(let n of t){const t=await fetch(r("tracks","50",n),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o}}),s=await t.json();e[`tracks_${n}`]=s.items;const c=await fetch(r("artists","50",n),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o}}),a=await c.json();e[`artists_${n}`]=a.items}const n=JSON.stringify(e);console.log(n),sessionStorage.setItem("total_data",n)}(),function(){let e=document.querySelector("#short_bttn"),t=document.querySelector("#medium_bttn"),o=document.querySelector("#long_bttn");e.addEventListener("click",(()=>new s("tracks_short_term","artists_short_term"))),t.addEventListener("click",(()=>new s("tracks_medium_term","artists_medium_term"))),o.addEventListener("click",(()=>new s("tracks_long_term","artists_long_term")))}(),document.querySelector("#login").style.display="none";else{let t=document.querySelector("#login_spotify"),o=(()=>{let t="https://accounts.spotify.com/authorize";return t+="?response_type=token",t+="&client_id="+encodeURIComponent("9b212b049d7743ec9891cd13f67a9b85"),t+="&scope="+encodeURIComponent("user-read-private user-read-email user-read-recently-played user-top-read playlist-modify-public"),t+="&redirect_uri="+encodeURIComponent("http://127.0.0.1:5500/index.html"),t+="&state="+encodeURIComponent(e),localStorage.setItem("spotify_auth_state",e),t})();t.setAttribute("href",o),document.querySelector("#logged_in").style.display="none"}console.log(n.topArtist("artists_long_term",5)),console.log(n.topTracks("tracks_long_term",5)),console.log(n.topGenres("artists_long_term",5)),console.log(n.mostObscure("artists_long_term"))}))}()}();
//# sourceMappingURL=main.js.map