{"version":3,"file":"main.js","mappings":"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","sources":["webpack://javascript_project/./src/scripts/authorization.js","webpack://javascript_project/./src/scripts/requests.js","webpack://javascript_project/./src/scripts/util.js","webpack://javascript_project/./src/scripts/slides.js","webpack://javascript_project/./src/index.js"],"sourcesContent":["const client_id = '9b212b049d7743ec9891cd13f67a9b85'\nconst redirect_uri = 'http://127.0.0.1:5500/index.html'\n\nconst stateKey = 'spotify_auth_state'\nconst scope = 'user-read-private user-read-email user-read-recently-played user-top-read playlist-modify-public';\n\n\nfunction generateRandomString(length) {\n    let chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n    let str = '';\n    for (let i = 0; i < length; i++) {\n        str += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n\n    return str;\n};\n\nconst state = generateRandomString(16);\n\n\n\n\nexport const auth_url = () => {\n    let url = 'https://accounts.spotify.com/authorize';\n    url += '?response_type=token';\n    url += '&client_id=' + encodeURIComponent(client_id);\n    url += '&scope=' + encodeURIComponent(scope);\n    url += '&redirect_uri=' + encodeURIComponent(redirect_uri);\n    url += '&state=' + encodeURIComponent(state);\n\n    localStorage.setItem(stateKey, state);\n    \n    return url;\n\n}\n\n\n\n\n// app.get('/login', (req, res) => {\n//     let state = res.cookie(stateKey, generateRandomString(16))\n//     const codeVerifier = generateRandomString(64)\n//     const scope = 'user-read-private user-read-email user-read-recently-played user-top-read playlist-modify-public';\n\n//     res.redirect(generateUrlWithSearchParams('https://accounts.spotify.com/authorize?',\n//         {\n//             client_id: client_id,\n//             response_type: 'code',\n//             redirect_uri: redirect_uri,\n//             state: state,\n//             scope: scope,\n//             code_challange_method: 'S256',\n//             code_challange: generateCodeChallenge(codeVerifier)\n//         }\n//     ))\n// });\n\n","const key = window.location.hash\nconst token = key.slice(key.indexOf(\"=\") + 1, key.indexOf(\"&\"))\n\nfunction generateRequestUrl(type, length, time) { \n    let url = 'https://api.spotify.com/v1/me/top';\n    url += '/' + type;\n    url += '?limit=' + length;\n    url += '&time_range=' + time;\n\n    return url;\n}\n\n// https://api.spotify.com/v1/me/top/song?limit=50&time_range=long_term\n\nexport async function recieveRequest(){\n\n    const total_data = {};\n    let length = ['short_term', 'medium_term', 'long_term']\n    for(let time of length) {\n        const response = await fetch(generateRequestUrl('tracks', '50', time), {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + token\n            }\n        })\n        const data = await response.json()\n            \n        total_data[`tracks_${time}`] = data.items\n            \n\n        const response2 = await fetch(generateRequestUrl('artists', '50', time), {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + token\n            }\n        })\n        const data2 = await response2.json()\n\n        total_data[`artists_${time}`] = data2.items\n    };\n\n    \n    const tds = JSON.stringify(total_data)\n    console.log(tds);\n    sessionStorage.setItem('total_data', tds);\n    return total_data;\n}\n\n","export const Util = {\n    \n    topArtist(typeTime, limit) {\n        const parse = JSON.parse(sessionStorage.total_data)\n        let namesArtworks = [];\n        for (let i = 0; i < limit; i++) {\n            namesArtworks.push([parse[typeTime][i].name, parse[typeTime][i].images[0].url]);\n        }\n\n        return namesArtworks;\n    },\n\n    topTracks(typeTime, limit) {\n        const parse = JSON.parse(sessionStorage.total_data)\n        let titlesArtistArtwork = [];\n        for (let i = 0; i < limit; i++) {\n            titlesArtistArtwork.push([parse[typeTime][i].name, parse[typeTime][i].artists[0].name, parse[typeTime][i].album.images[0].url]);\n        }\n\n        return titlesArtistArtwork;\n    },\n\n    topGenres(typeTime, limit) {\n        const parse = JSON.parse(sessionStorage.total_data)\n        const genreCount = {};\n\n        for (let i = 0; i < 50; i++) {\n            let genreList = parse[typeTime][i].genres;\n            for (let genre of genreList) {\n                if (!genreCount[genre]) {\n                    genreCount[genre] = 0;\n                }\n                genreCount[genre] += 1;\n            }\n        }\n        const sorted = Object.entries(genreCount).sort((x, y) => y[1] - x[1]);\n\n        const topGernreList = [];\n        for (let i = 0; i < limit; i++) {\n            topGernreList.push(sorted[i]);\n        }\n\n        return topGernreList;\n    },\n\n    mostObscure(typeTime) {\n        const parse = JSON.parse(sessionStorage.total_data)\n        let obscure = 0;\n        let name = null;\n        let picUrl = null;\n        \n        for (let i = 0; i < 50; i++) {\n            if (parse[typeTime][i].popularity > obscure) {\n                obscure = parse[typeTime][i].popularity;\n                name = parse[typeTime][i].name;\n                picUrl = parse[typeTime][i].images[0].url;\n            }\n        }\n\n        return [name, picUrl, obscure];\n    },\n\n    randomColor() {\n        const colors = ['#f037a5', '#cdf564']\n        let randIndex = Math.floor(Math.random()*2)\n        return colors[randIndex]\n    }\n}\n","import {Util} from './util'\n\nexport class Slides {\n    constructor(trackTime, artistTime){\n        this.createSlideTrack(trackTime);\n        this.createSlideArtist(artistTime);\n        this.createSlideGenre(artistTime);\n        this.createSlideObscure(artistTime)\n    }\n\n    createSlideArtist(typeTime) {\n    const queryResults = Util.topArtist(typeTime, 5);\n\n    let h2 = document.querySelector('#topArtists_h2');\n    h2.innerHTML = \"Funny sentence\"\n    \n    let figure = document.querySelector('#artist_grid')\n    for (let i = 0; i < 9; i++) {\n        let img = document.createElement('img');\n        img.src = queryResults[0][1];\n        figure.append(img);\n    }\n\n    let ul = document.querySelector('#topArtists_ul')\n    for (let artist of queryResults) {\n        let li = document.createElement('li');\n        li.innerHTML = `${artist[0]}`;\n        ul.append(li);\n    }\n}\n\n    createSlideTrack(typeTime) {\n        const queryResults = Util.topTracks(typeTime, 5);\n\n        let track_h2 = document.querySelector('#topTracks_h2');\n        track_h2.innerHTML = 'Top Tracks for $ { }';\n\n        let figure = document.querySelector('#topTracks_figure')\n        for (let track of queryResults) {\n            let div = document.createElement('div');\n            let p = document.createElement('p');\n            let img = document.createElement('img');\n            img.src = track[2];\n            p.innerHTML = track[0];\n\n            div.append(img);\n            div.append(p)\n            figure.append(div);\n        }\n    }\n\n    createSlideGenre(typeTime) {\n        const queryResults = Util.topGenres(typeTime, 5);\n\n        let h2 = document.querySelector('#topGenres_h2');\n        h2.innerHTML = `Top Genres for $ { }`;\n\n        let ul = document.querySelector('#topGenres_ul');\n        for(let i = 0; i < 5; i++){\n            let li = document.createElement('li');\n            li.innerHTML = queryResults[i][0];\n            ul.append(li)\n        }\n    }\n\n    createSlideObscure(typeTime) {\n        const queryResults = Util.mostObscure(typeTime);\n        \n        let h2 = document.querySelector('#mostObscure_h2');\n        h2.innerHTML = `Most Obscure Artist`;\n\n        let h3 = document.querySelector('#mostObscure_h3');\n        h3.innerHTML = queryResults[0];\n\n        let img = document.createElement('img');\n        img.src = queryResults[1];\n\n        let div = document.querySelector('#obscure_imgs')\n        for(let i=0; i < 3; i++){\n            div.append(img)\n        }\n    }\n}\n","import { auth_url } from './scripts/authorization'\nimport { recieveRequest } from './scripts/requests'\nimport { Util } from './scripts/util'\nimport {Slides} from './scripts/slides'\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    if (!window.location.hash.includes('access_token')){\n        let bttn = document.querySelector(\"#login_spotify\")\n        let url = auth_url();\n        bttn.setAttribute(\"href\", url);\n\n        document.querySelector('#logged_in').style.display = \"none\"\n        \n    } else {\n        if (sessionStorage.getItem('total_data') === null) {\n            recieveRequest();\n        }\n        requestBttnEvents();\n        document.querySelector('#login').style.display = \"none\";\n    }\n\n    console.log(Util.topArtist('artists_long_term', 5));\n    console.log(Util.topTracks('tracks_long_term', 5));\n    console.log(Util.topGenres('artists_long_term', 5));\n    console.log(Util.mostObscure('artists_long_term'));\n})\n\nfunction requestBttnEvents() {\n    let short = document.querySelector('#short_bttn');\n    let med = document.querySelector('#medium_bttn');\n    let long = document.querySelector('#long_bttn');\n\n    short.addEventListener('click', () => new Slides('tracks_short_term', 'artists_short_term'));\n    med.addEventListener('click', () => new Slides('tracks_medium_term', 'artists_medium_term'));\n    long.addEventListener('click', () => new Slides('tracks_long_term', 'artists_long_term'))\n}"],"names":["state","length","chars","str","i","charAt","Math","floor","random","generateRandomString","key","window","location","hash","token","slice","indexOf","generateRequestUrl","type","time","url","Util","topArtist","typeTime","limit","parse","JSON","sessionStorage","total_data","namesArtworks","push","name","images","topTracks","titlesArtistArtwork","artists","album","topGenres","genreCount","genreList","genres","genre","sorted","Object","entries","sort","x","y","topGernreList","mostObscure","obscure","picUrl","popularity","randomColor","Slides","constructor","trackTime","artistTime","this","createSlideTrack","createSlideArtist","createSlideGenre","createSlideObscure","queryResults","document","querySelector","innerHTML","figure","img","createElement","src","append","ul","artist","li","track","div","p","addEventListener","includes","getItem","async","response","fetch","method","headers","data","json","items","response2","data2","tds","stringify","console","log","setItem","recieveRequest","short","med","long","requestBttnEvents","style","display","bttn","encodeURIComponent","localStorage","auth_url","setAttribute"],"sourceRoot":""}